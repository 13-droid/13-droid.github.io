<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://mistystep.org/static/css/theme.css">
    <link rel="icon" type="image/png" href="https://emoji.dutl.uk/png/64x64/üå´Ô∏è.png">
    <title>Link seals - self-testing links proof of concept - Misty Step Blog</title>
    
    <meta property="og:title" name="title" content="Link seals - self-testing links proof of concept" />
    <meta property="og:image" name="image" content="https://mistystep.org/static/img/default_img.png" />
    <meta property="og:description" name="description" content="Link seals provide a quick soft-check utility for link health on your web spaces." />
    <meta property="og:type" content="website" />
    <meta property="og:url" name="url" content="https://mistystep.org/blog/testable-links">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Link seals - self-testing links proof of concept">
    <meta name="twitter:description" content="Link seals provide a quick soft-check utility for link health on your web spaces.">
    <meta name="twitter:image" content="https://mistystep.org/static/img/default_img.png">
    <link rel="canonical" href="https://mistystep.org/blog/testable-links" />
    <meta property="og:pubdate" name="pubdate" content="Tue, 14 Jan 2025 00:00:00 +0000" />
    
    <!-- Link to headings -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const headings = document.querySelectorAll('main h2, main h3, main h4');
    headings.forEach(function (heading) {
      heading.addEventListener('click', function () {
        window.location.hash = heading.id;
      });
    });
  });
</script>

<!-- Highlight tagged links and texts -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('find-tag').forEach(tag => {
      tag.addEventListener('click', () => {
        const searchString = tag.textContent.trim();
        document.querySelectorAll('a').forEach(link => {
          if (link.href.includes(searchString)) {
            link.classList.add('highlighted');
          } else {
            link.classList.remove('highlighted');
          }
        });
        document.querySelectorAll('tag').forEach(tag => {
          if (tag.innerText.includes(searchString)) {
            tag.classList.add('highlighted');
          } else {
            tag.classList.remove('highlighted');
          }
        });
      });
    });
  });
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BE6M913MKW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BE6M913MKW');
</script>

<!-- Retro hit counter -->
<script type="text/javascript" src="https://counter.websiteout.com/js/2/0/16/1"></script>
<!-- üóøü•ö -->
  </head>
  <body>
    <div class="wrapper">
      <div class="content">
        <nav>
          <p><a href="/rss.xml">RSS</a></p>
<p><img alt="" src="/static/img/ms.png" /></p>
<p><a href="/">Blog</a> | <a href="/about">About</a> | <a href="/blog/following">Following</a> | <a href="/notes">Notes</a></p>
        </nav>
      </div>
      <div class="content">
        <main>
          
          <categoryTag>
            coding
          </categoryTag>
          
          <categoryTag>
            security
          </categoryTag>
          
          <categoryTag>
            automation
          </categoryTag>
          
          <h1 id="link-seals-self-testing-links-proof-of-concept">Link seals - self-testing links proof of concept</h1>
<div class="toc">
<ul>
<li><a href="#link-seals-self-testing-links-proof-of-concept">Link seals - self-testing links proof of concept</a><ul>
<li><a href="#what-is-a-link-seal">What is a link seal</a><ul>
<li><a href="#premise">Premise</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#public-or-private-seal-check-functions">Public or Private Seal Check Functions</a><ul>
<li><a href="#public">Public</a></li>
<li><a href="#private">Private</a></li>
</ul>
</li>
<li><a href="#applications">Applications</a></li>
<li><a href="#challenges">Challenges</a></li>
<li><a href="#live-demo">Live Demo üö®</a></li>
<li><a href="#for-posteriority">For Posteriority</a></li>
</ul>
</li>
</ul>
</div>
<p>What if we could construct our outgoing hrefs with testability from T0?</p>
<p>I was reading <a href="https://shkspr.mobi/blog/2024/12/how-bad-is-link-rot-on-my-blog/" linksealkey="Terence Eden">How bad is link rot on my blog?</a>
on Terence Eden's blog. It‚Äôs an article where he shares his experience tending to outgoing links in his blog. He shares
some <a href="https://shkspr.mobi/blog/link-rot/">interesting data</a> on it as well. I encourage you to have a read.</p>
<p>This is an interesting topic. Let me quote some relevant bits for me to set the scene if you're not bothering to read his full post.  </p>
<blockquote>
<p>Why don't I just cURL the URL and see if it responds with a 2xx HTTP code?  </p>
<p>I used to use an automated checker to test my links. But spam sites lie. Lots of the dead sites have been taken over by scammers, spammers, and AI grifters. They return an HTTP OK and then serve up advertising. Yeuch! So now I spend each morning Tending To My Digital Garden and manually checking the links.  </p>
</blockquote>
<p>So I'm sat here thinking, what if... the scammers could not lie? Or rather, what if you could detect it when they did? Enter‚∏∫  </p>
<h2 id="what-is-a-link-seal">What is a link seal</h2>
<h3 id="premise">Premise</h3>
<p>My proposal is simple; hyperlinks on a webpage could carry information that's going to make it possible to verify if the
source linked contains the expected content. The web page that has the link should define a <strong>link seal check</strong> function, which can be used
to programmatically run through the content on the target page to verify if its content has changed drastically.  </p>
<h3 id="example">Example</h3>
<p>Let‚Äôs assume our target page is the following simple hello world page, and it lives on <a href="https://my.site/" linksealkey="Hello World">https://my.site/</a></p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>&lt;<span style="color: #008000; font-weight: bold">html</span>&gt;  
  &lt;<span style="color: #008000; font-weight: bold">head</span>&gt;  
    &lt;<span style="color: #008000; font-weight: bold">title</span>&gt;Hello world&lt;/<span style="color: #008000; font-weight: bold">title</span>&gt;  
  &lt;/<span style="color: #008000; font-weight: bold">head</span>&gt;  
  &lt;<span style="color: #008000; font-weight: bold">body</span>&gt;  
      &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Hello world!&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;  
      &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;I'm a website.&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;  
  &lt;/<span style="color: #008000; font-weight: bold">body</span>&gt;  
&lt;/<span style="color: #008000; font-weight: bold">html</span>&gt;  
</code></pre></div>
<p>Take the following key function.  </p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">function</span><span style="color: #BBB"> </span>linkSealCheck(href,<span style="color: #BBB"> </span>key)<span style="color: #BBB"> </span>{<span style="color: #BBB">  </span>
<span style="color: #BBB">  </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #BBB"> </span>fetch(href)
<span style="color: #BBB">    </span>.then(response<span style="color: #BBB"> </span>=&gt;<span style="color: #BBB"> </span>response.text())
<span style="color: #BBB">    </span>.then(content<span style="color: #BBB"> </span>=&gt;<span style="color: #BBB"> </span>content.includes(key))
<span style="color: #BBB">    </span>.<span style="color: #008000; font-weight: bold">catch</span>(()<span style="color: #BBB"> </span>=&gt;<span style="color: #BBB"> </span><span style="color: #008000; font-weight: bold">false</span>);<span style="color: #BBB"> </span><span style="color: #3D7B7B; font-style: italic">// Return false if the fetch fails</span>
}
</code></pre></div>
<p>The link on our webpage would look like:  </p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #687822">href</span><span style="color: #666">=</span><span style="color: #BA2121">'https://my.site/'</span> <span style="color: #687822">linksealkey</span><span style="color: #666">=</span><span style="color: #BA2121">'Hello world'</span>&gt;My awesome site&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;  
</code></pre></div>
<p>When we want to verify the links on our blog, we can go through all <code>&lt;a&gt;</code> tags and call the <strong>linkSealCheck</strong> function for each one:  </p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">function</span><span style="color: #BBB"> </span>keySealVerifier()<span style="color: #BBB"> </span>{
<span style="color: #BBB">  </span><span style="color: #008000; font-weight: bold">const</span><span style="color: #BBB"> </span>links<span style="color: #BBB"> </span><span style="color: #666">=</span><span style="color: #BBB"> </span><span style="color: #008000">document</span>.querySelectorAll(<span style="color: #BA2121">'a[linksealkey]'</span>);
<span style="color: #BBB">  </span>links.forEach(link<span style="color: #BBB"> </span>=&gt;<span style="color: #BBB"> </span>{
<span style="color: #BBB">    </span><span style="color: #008000; font-weight: bold">const</span><span style="color: #BBB"> </span>href<span style="color: #BBB"> </span><span style="color: #666">=</span><span style="color: #BBB"> </span>link.href;
<span style="color: #BBB">    </span><span style="color: #008000; font-weight: bold">const</span><span style="color: #BBB"> </span>key<span style="color: #BBB"> </span><span style="color: #666">=</span><span style="color: #BBB"> </span>link.getAttribute(<span style="color: #BA2121">'linksealkey'</span>);
<span style="color: #BBB">    </span>linkSealCheck(href,<span style="color: #BBB"> </span>key).then(isValid<span style="color: #BBB"> </span>=&gt;<span style="color: #BBB"> </span>{
<span style="color: #BBB">      </span><span style="color: #008000; font-weight: bold">if</span><span style="color: #BBB"> </span>(<span style="color: #666">!</span>isValid)<span style="color: #BBB"> </span>{
<span style="color: #BBB">        </span>console.warn(<span style="color: #BA2121">`Link </span><span style="color: #A45A77; font-weight: bold">${</span>href<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> failed the LinkSeal check!`</span>);
<span style="color: #BBB">      </span>}<span style="color: #BBB"> </span><span style="color: #008000; font-weight: bold">else</span><span style="color: #BBB"> </span>{
<span style="color: #BBB">        </span>console.log(<span style="color: #BA2121">`Link </span><span style="color: #A45A77; font-weight: bold">${</span>href<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> passed the LinkSeal check.`</span>);
<span style="color: #BBB">      </span>}
<span style="color: #BBB">    </span>});
<span style="color: #BBB">  </span>});
}
</code></pre></div>
<p>P.S.: This is a very simple implementation of a seal-key pair and a verifier function and it is for illustrative purposes.
Don't come into my inbox saying muh security. I'm talking about you, @infosec.exchange.</p>
<h2 id="public-or-private-seal-check-functions">Public or Private Seal Check Functions</h2>
<p>One (semi) important consideration is whether your <strong>link seal</strong> check function should be public or private.  </p>
<h3 id="public">Public</h3>
<p>A public <strong>link seal</strong> function allows anyone to verify the content of your links. This improves transparency and helps others keep integrity checks
on your website indefinitely. However, it also opens the possibility for abuse, as malicious actors could use the function to scrape information or
exploit your verification mechanism. However, this is highly unlikely except for very specific cases. This is in no way a completely trustable verification
method, but it should do the trick most of the time.</p>
<h3 id="private">Private</h3>
<p>A private <strong>link seal</strong> function is less exposed and can help protect your implementation from misuse. However, this approach limits the ability of third 
parties (e.g., search engines or link-checking tools) to independently verify your links, potentially reducing the reach of your verification mechanism.
However, this is rarely a case for concern, as you'll be doing the gardening for the foreseeable future.</p>
<h2 id="applications">Applications</h2>
<ul>
<li><strong>Gardening</strong>: Reduce link rot and ensure outgoing links still point to accurate, relevant information.</li>
<li><strong>Web Archives</strong>: Cross-check preserved versions of websites against original content snapshots. In theory, you could programmatically go back in time
  on the internet archive until you find a version that satisfies your link seal key.
  Inspired by, again;<blockquote>
<p>(...)
2. If the site is dead, or the content isn't there, I stick the URl into the WayBack Machine and pick the archive closest to the publication date.
(...)
‰∏Ä Terrence Eden, 'How bad is link rot on my blog?'</p>
</blockquote>
</li>
</ul>
<h2 id="challenges">Challenges</h2>
<ul>
<li><strong>Dynamic Content</strong>: Some sites have rapidly changing content or content that they load with javascript.</li>
<li><strong>Tampering</strong>: A malicious actor could attempt to mimic the expected content to pass checks. </li>
</ul>
<p>With these challenges in mind |I think <strong>link seal</strong> could serve as a simple, programmatic way to provide an extra layer of trust for hyperlinks.
I'm sure we'd be able to find anchor terms in dynamically loaded websites. The worst case for a false negative is someone clicking on an ad, and the
worst case for a false positive is you having to update your <strong>link seal</strong> key.</p>
<p>What do you think? Any ideas? Concerns? Do you think this is a big pile of bull? Reach out to tell me and let's discuss. Find me on <a href="https://mastodon.social/@cemre" linksealkey="some nonsense i would not say">mastodon</a>.</p>
<h2 id="live-demo">Live Demo üö®</h2>
<p>Here's an MVP implementation of linkseal running on your browser! (I hope this is working because it would be so embarassing if not)</p>
<h2 id="for-posteriority">For Posteriority</h2>
<p>I've since found <a href="https://unrot.link/">https://unrot.link/</a> which seems to automate the archive check process, but not against checkable logic to determine plausible temporality of the content to get from the archive.</p>
<div id="linkSealLogs"></div>
<script>
  // Utility function to log results to the "linkSealLogs" div
  function logToDiv(message, color) {
    const logDiv = document.getElementById("linkSealLogs");
    if (!logDiv) {
      console.error("Log container with ID 'linkSealLogs' not found.");
      return;
    }
    const logEntry = document.createElement("p");
    logEntry.textContent = message;
    logEntry.style.color = color;
    logDiv.appendChild(logEntry);
  }

  async function fetchWithProxies(href, proxies) {
    for (const proxy of proxies) {
      const proxyUrl = proxy ? `${proxy}${encodeURIComponent(href)}` : href;
      try {
        const response = await fetch(proxyUrl);
        if (response.ok) {
          return await response.json();
        }
      } catch (error) {
        // Continue to the next proxy if there‚Äôs an error
      }
    }
    throw new Error(`Failed to fetch ${href} using all provided proxies.`);
  }

  async function linkSealCheck(href, key) {
    try {
      const proxies = [
        "https://api.allorigins.win/get?url=",
        "https://corsproxy.io/?url=",
        "https://test.cors.workers.dev/?",
        "", // Direct fetch if CORS is allowed
      ];

      const data = await fetchWithProxies(href, proxies);
      const content = data.contents || ""; // Handle empty content gracefully

      // Check if the content includes the key
      if (content.includes(key)) {
        logToDiv(`Validation passed for ${href}. Key '${key}' found.`, "chartreuse");
        return true;
      } else {
        logToDiv(`Validation failed for ${href}. Key '${key}' not found.`, "red");
        return false;
      }
    } catch (error) {
      logToDiv(`Error checking link ${href}: ${error.message}`, "red");
      return false;
    }
  }

  async function verifyLinks() {
    const links = document.querySelectorAll('a[linksealkey]');
    for (const link of links) {
      const href = link.href;
      const key = link.getAttribute('linksealkey');
      logToDiv(`Checking link: ${href} with key: '${key}'`, "cornflowerblue");
      await linkSealCheck(href, key);
    }
  }

  // Run the verification on page load
  window.onload = verifyLinks;
</script>
<p><parsers-ignore style="text-align:center">
<hr/>
    Share this post on:
</parsers-ignore></p>
<p><parsers-ignore id="share-buttons">
<a id="mastodon-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="Mastodon" src="https://mistystep.org/static/img/social/mastodon.png"/>
</button>
</a>
<a id="facebook-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="Facebook" src="https://mistystep.org/static/img/social/facebook.png"/>
</button>
</a>
<a id="linkedin-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="LinkedIn" src="https://mistystep.org/static/img/social/linkedin.png"/>
</button>
</a>
<a id="bluesky-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="Bluesky" src="https://mistystep.org/static/img/social/bluesky.png"/>
</button>
</a>
<a id="threads-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="Threads" src="https://mistystep.org/static/img/social/threads.png"/>
</button>
</a>
<a id="reddit-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="Reddit" src="https://mistystep.org/static/img/social/reddit.png"/>
</button>
</a>
<a id="whatsapp-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="WhatsApp" src="https://mistystep.org/static/img/social/whatsapp.png"/>
</button>
</a>
<a id="telegram-share" rel="noopener noreferrer" target="_blank">
<button>
<img alt="Telegram" src="https://mistystep.org/static/img/social/telegram.png"/>
</button>
</a>
</parsers-ignore></p>
<style>
    #share-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin: 20px 0;
    }

    #share-buttons a button {
        cursor: pointer;
    }

    #share-buttons a button img {
        width: 40px;
        height: 40px;
        display: block;
    }
</style>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const metaTitle = document.querySelector("meta[name='title']")?.content || document.title;
        const metaDescription = document.querySelector("meta[name='description']")?.content || "";
        const encodedTitle = encodeURIComponent(metaTitle);
        const encodedDescription = encodeURIComponent(metaDescription);
        const pageUrl = encodeURIComponent(window.location.href);

        // Mastodon
        const mastodonButton = document.getElementById("mastodon-share");
        mastodonButton.href = `https://tootpick.org/#text=${encodedTitle}%20${pageUrl}`;

        // Facebook
        const facebookButton = document.getElementById("facebook-share");
        facebookButton.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;

        // LinkedIn
        const linkedinButton = document.getElementById("linkedin-share");
        linkedinButton.href = `https://www.linkedin.com/shareArticle?mini=true&url=${pageUrl}&title=${encodedTitle}`;

        // Bluesky
        const blueskyButton = document.getElementById("bluesky-share");
        blueskyButton.href = `https://bsky.app/intent/compose?text=${encodedTitle}%20${pageUrl}`;

        // Threads
        const threadsButton = document.getElementById("threads-share");
        threadsButton.href = `https://www.threads.net/intent/post?url=${pageUrl}&text=${encodedTitle}`;

        // Reddit
        const redditButton = document.getElementById("reddit-share");
        redditButton.href = `https://www.reddit.com/submit?url=${pageUrl}&title=${encodedTitle}`;

        // WhatsApp
        const whatsappButton = document.getElementById("whatsapp-share");
        whatsappButton.href = `https://api.whatsapp.com/send/?text=${encodedTitle}%20${pageUrl}`;

        // Telegram
        const telegramButton = document.getElementById("telegram-share");
        telegramButton.href = `https://telegram.me/share/url?url=${pageUrl}&text=${encodedTitle}`;
    });
</script>
        </main>
      </div>
      <footer>
        <p>misty@mail.co.uk - üå´Ô∏è - 2025</p>
      </footer>
    </div>
  </body>
</html>